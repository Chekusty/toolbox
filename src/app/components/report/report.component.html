<div id="root" class="container-fluid" *ngIf="this.data">
    <!--<div uib-alert ng-repeat="alert in alerts" *ngClass="'alert-' + alert.type" dismiss-on-timeout="2000" close="closeAlert($index)">{{alert.msg}}</div>-->

    <h1>{{this.data.testSuite}} Report</h1>

    <h3 class="statContainer">
        <span class="stat">Passed <span class='label label-success'>{{this.testPairs | passedTests}}</span>&nbsp;&nbsp; Failed <span class='label label-danger'>{{this.testPairs.length-(this.testPairs | passedTests)}}</span></span>
    </h3>

    <div class="no-print summaryControls">
        <button class="btn btn-default summaryListButton" type="button" class="btn btn-default">
      <span *ngIf="!isSummaryListCollapsed" (click)="toogleSummary()">Collapse Summary</span>
      <span *ngIf="isSummaryListCollapsed" (click)="toogleSummary()">Expand Summary</span>
    </button>
        <!-- <button class="btn btn-default summaryListButton" type="button" class="btn btn-default" ng-click="copyFailedTestsIds()">Copy failed tests to clipboard</button> -->
    </div>
    <div class="summaryBlock">
        <table class="summaryList" [hidden]="!isSummaryListCollapsed">
            <tr *ngFor="let testPair of testPairs">
                <td class="statusInds">
                    <div class="indicator failed">
                        <span class="dot" [ngClass]="{
                            'green':(testPair.status=='pass'),
                            'red':(testPair.status!='pass')
                            }"></span>
                        <span>
                             {{testPair.status=='pass' ? 'passed' : 'failed'}}
                        </span>


                    </div>
                </td>
                <td>{{ testPair.pair.label }}</td>
                <td>{{ testPair.pair.selector }}</td>
                <td><span class="fileName ">{{ testPair.pair.fileName }}</span></td>
            </tr>
        </table>
    </div>
    <!-- end summaryBlock -->

    <div class='no-print filterGroup form-group'>
        <label for="statusFilter " class="control-label statusFilter ">status filter
      <select id="statusFilter " class="form-control " (ngModelChange)="onChangeObj($event)">
          <option [value]="pass" (select)="filteredTestPairs('pass')">Pass</option>
          <option [value]="failed" (select)="filteredTestPairs('failed')">Failed</option>
      </select>
    </label>
        <label for="showPairStats " class="control-label showPairStats ">show stats
      <input id="showPairStats " type="checkbox"  class="showPairStats" (change)="toogleStatVisibility()" />
    </label>
    </div>
    <!-- end filterGroup -->

    <div class="results " *ngFor="let testPair of filteredTestPairs">
        <div class="flex-container ">
            <div class="selector">{{ testPair.pair.label }} - {{ testPair.pair.selector }}
                <button type="button " class="btn btn-default btn-sm show-diff no-print " ng-click="openModal( 'lg', testPairs.a.src, testPairs.b.src) ">Show diff</button>
            </div>
            <div class="filename">{{ testPair.pair.fileName }}</div>
        </div>
        <div class="flex-container small ">
            <div class="asset-heading ">REFERENCE</div>
            <div class="asset-heading ">TEST</div>
            <div *ngIf="testPair.status!='pass'" class="asset-heading ">DIFF</div>
            <div *ngIf="showPairStats" class="asset-heading ">REPORT</div>
        </div>
        <div class="flex-container ">
            <div>
                <img [src]="getReportImageURL(testPair.pair.reference)" alt="Reference " (click)="openModal(testPair.pair.reference, testPair.pair.test)" onerror="this.src=BASE64_PNG_STUB" />
            </div>
            <div>
                <img [src]="getReportImageURL(testPair.pair.test)" alt="Test " (click)="openModal(testPair.pair.reference, testPair.pair.test)" onerror="this.src=BASE64_PNG_STUB" />
            </div>
            <div *ngIf="testPair.status!='pass'">
                <img [src]="getReportImageURL(testPair.pair.diffImage) || 'missingImg.png' " image-name="c " alt="Difference " onerror="this.src=BASE64_PNG_STUB" />
            </div>
            <div *ngIf="statVisibility ">
                <div class="statusInds ">
                    <span class="dot" [ngClass]="{
                            'green':(testPair.status=='pass'),
                            'red':(testPair.status!='pass')
                            }"></span>
                    <span>
                             {{testPair.status=='pass' ? 'passed' : 'failed'}}
                        </span>
                </div>
                <div class="reportTxt ">Report: {{ JSON.stringify(testPair.pair.diff,null,2)}}</div>
                <div class="reportTxt ">Threshold: {{ testPair.pair.misMatchThreshold}}</div>
            </div>
        </div>
    </div>
    <!-- end results -->

    <!--<div>
        <script type="text/ng-template " id="myModalContent.html ">
            <div class="modal-header ">
                <h3 class="modal-title " id="modal-title ">Comparison result</h3>
            </div>
            <div class="modal-body " id="modal-body ">

                <div class="btn-group " role="group ">
                    <button type="button " class="btn btn-success " ng-click="setImgPositionValue(100) ">Reference</button>
                    <button type="button " class="btn btn-warning " ng-click="setImgPositionValue(0) ">Test</button>
                </div>

                <revealer top-image="{{ selected.referenceImg }} " bottom-image="{{ selected.testImg }} " start-position="imgPositionValue ">
                </revealer>

            </div>
            <div class="modal-footer ">
                <button class="btn btn-primary " type="button " ng-click="ok() ">OK</button>
            </div>
        </script>
    </div>-->

</div>
<!-- end #root -->
<ngbd-modal-component></ngbd-modal-component>